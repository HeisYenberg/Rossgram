<!DOCTYPE html>
<html lang="ru" dir="ltr"
      class="_9dls _ar44 js-focus-visible _aa4d __fb-dark-mode">
<head>
    <meta charset="UTF-8">
    <title>Коллекция пользователя</title>
    <style data-btmanifest="1019961719_main" nonce="">.__fb-dark-mode {
        --polaris-site-width-wide: 935px;
        --polaris-site-padding-top: 30px;
        --system-20-font-size: 20px;
    }</style>
    <style data-btmanifest="1019958032_main" nonce>
        @media (prefers-color-scheme: dark) {
            :root {
                --site-width-narrow: 600px;
            }
        }
    </style>
    <script>
        function uploadImage() {
            const form = document.getElementById('uploadForm');
            form.submit();
        }
    </script>
</head>
<body class="_ar45 system-fonts--body sf">
<div style="height: 100%;">
    <div class="x1gryazu x17snn68">
        <section>
            <main>
                <div class="xkrivgy x1gryazu x1ykew4q x38y82z xc73u3c x5ib6vp">
                    <header class="x78zum5 xc2v4qs x1ez9qw7 x1kcpa7z">
                        <div class="x78zum5 xl56j7k x16fuon9 x5bv2cf x9ozhqo">
                            <div role="button" tabindex="0">
                                <span role="link" tabindex="-1"
                                      style="height: 150px; width: 150px;"
                                      class="x14yjl9h xudhj91 x18nykt9 xww2gxu x1lliihq x10wlt62">
                                    <svg class="mx-auto" fill="currentColor"
                                         height="150px" viewBox="0 0 16 16"
                                         width="150px"
                                         xmlns="http://www.w3.org/2000/svg">
                                        <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
                                        <path d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"
                                              fill-rule="evenodd"/>
                                    </svg>
                                </span>
                            </div>
                        </div>
                        <section
                                class="x78zum5 xdt5ytf xl56j7k x139hhg0 x1qgnrqa">
                            <div class="x6s0dn4 x78zum5 xkfe5hh">
                                <div class="x1h5jrl4">
                                    <div>
                                        <a href="#" role="link" tabindex="0">
                                            <h2 dir="auto" class="x1ms8i2q"
                                                style="----base-line-clamp-line-height: 25px; --lineHeight: 25px;"
                                                th:text="${username}">
                                            </h2>
                                        </a>
                                    </div>
                                </div>
                                <div class="x1i64zmx"
                                     th:if="${userId == #authentication.principal}">
                                    <form id="uploadForm"
                                          th:action="@{/users/me/collections}"
                                          method="post"
                                          enctype="multipart/form-data">
                                        <input type="file" id="imageFile"
                                               name="imageFile"
                                               accept="image/*"
                                               style="display: none;"
                                               onchange="uploadImage()">
                                        <button class=" _acan _acap _acas _aj1- _ap30"
                                                type="button"
                                                onclick="document.getElementById('imageFile').click();">
                                            <div style="height: 100%;"
                                                 class="x150jy0e x1e558r4">
                                                <div class="_ap3a _aaco _aacw _aad6 _aade">
                                                    Добавить изображение
                                                </div>
                                            </div>
                                        </button>
                                    </form>
                                </div>
                            </div>
                        </section>
                    </header>
                    <div class="xg7h5cd x1n2onr6">
                        <div>
                            <div style="display: flex; flex-direction: column; padding-bottom: 0px; padding-top: 0px; position: relative;"
                                 th:with="size=${images.size()}, rows=${size / 3 + (size % 3 == 0 ? 0 : 1)}">
                                <div class="_ac7v x1f01sob xcghwft xat24cr xzboxd6"
                                     th:each="row : ${#numbers.sequence(0, rows > 0 ? rows - 1 : 0)}">
                                    <div th:each="col : ${#numbers.sequence(0, 2)}">
                                        <div th:with="index=${row * 3 + col}">
                                            <div class="x1n2onr6 x9i3mqj"
                                                 th:if="${index < size}">
                                                <a th:href="@{/collections/images/{image_id}(image_id=${images[index].id})}"
                                                   role="link" tabindex="0">
                                                    <div class="_aagu">
                                                        <div class="_aagv">
                                                            <img class="x5yr21d xu96u03 x10l6tqk x13vifvy x87ps6o xh8yej3"
                                                                 style="object-fit: cover;"
                                                                 crossorigin="anonymous"
                                                                 alt="User image"
                                                                 th:src="${images[index].imageBase64}">
                                                        </div>
                                                        <form th:if="${userId == #authentication.principal}"
                                                              th:action="@{/users/me/collections/{image_id}(image_id=${images[index].id})}"
                                                              method="post"
                                                              onsubmit="return confirm('Вы уверены, что хотите удалить?');">
                                                            <button type="submit"
                                                                    tabindex="-1"
                                                                    style="background-color: transparent; border: none"
                                                                    class="xuk3077 x78zum5 xdt5ytf xds687c x10l6tqk x13vifvy">
                                                                <div class="x1xmf6yo x1emribx">
                                                                    <svg xmlns="http://www.w3.org/2000/svg"
                                                                         width="20"
                                                                         height="20"
                                                                         viewBox="0 0 24 24"
                                                                         fill="none"
                                                                         stroke="currentColor"
                                                                         stroke-width="2"
                                                                         stroke-linecap="round"
                                                                         stroke-linejoin="round"
                                                                         class="feather feather-trash-2">
                                                                        <polyline
                                                                                points="3 6 5 6 21 6"></polyline>
                                                                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                                                        <line x1="10"
                                                                              y1="11"
                                                                              x2="10"
                                                                              y2="17"></line>
                                                                        <line x1="14"
                                                                              y1="11"
                                                                              x2="14"
                                                                              y2="17"></line>
                                                                    </svg>
                                                                </div>
                                                            </button>
                                                        </form>
                                                    </div>
                                                </a>
                                            </div>
                                            <div class="x9i3mqj"
                                                 th:if="${index >= size}"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </section>
    </div>
    <div th:replace="~{fragments/navigation :: navigation}"></div>
</div>
<link type="text/css" rel="stylesheet"
      th:href="@{/css/styles.css}"
      data-bootloader-hash="jSeRUEM" data-async-css="1" crossorigin="anonymous"
      data-p=":7,54" data-btmanifest="1019961719_main" data-c="1">
</body>
</html>